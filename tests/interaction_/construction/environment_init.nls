to initEnvironment
  
  ;;init gobals variables
  set default 0
  set forest 1
  set forestColor green
  set mountain 2
  set mountainColor grey

  ;;init forest
  ask one-of patches with [environmentType = default]
  [spreadEnvironment forest forestColor 200]
  
  ;;init mountain
  ask one-of patches with [environmentType = default]
  [spreadEnvironment mountain mountainColor 200]
  
end

to spreadEnvironment [ envType envColor nb_iter ]
  set environmentType envType
  set pcolor envColor
  ifelse (nb_iter > 0)
  [ ask one-of patches with [environmentType = default and one-of neighbors4 with [environmentType = envType] != nobody ]
    [ spreadEnvironment envType envColor (nb_iter - 1) ] ]
  [ ask patches with [ pcolor = black and count neighbors4 with [ pcolor = envColor] > 1]
    [ set pcolor envColor] ]
end